- options= {'controller' => controller.controller_name}
- options['action'] = @feature.new_record? ? :create : :update
- options['id'] = @feature.id unless @feature.new_record?
- @feature.release_date = @feature.release_date.to_date if @feature.release_date.present? && @feature.release_date.acts_like?(:time)

= form_for @feature, url: url_for(options)  do |f|
  - if @feature.errors.any?
    #error_explanation
      %h2= "#{pluralize(@feature.errors.count, "error")} prohibited this feature from being saved:"
      %ul
        - @feature.errors.full_messages.each do |msg|
          %li= msg

  .row
    .six.columns.end
      = f.label :title
      = f.text_field :title, size: 25
  .row
    .two.columns
      = f.label :service_id
      = f.select :service_id, Service.active.map{|s| [ s.abbreviation, s.id ] }
    .two.column
      = f.label :contact_us_number, I18n.t(:contact_us_number, scope: [:activerecord, :attributes, :feature])
      = f.text_field :contact_us_number, size: 5
    .two.columns.end
      = f.label :release_date
      = f.text_field :release_date, data: {datefield: true}
  .row
    = f.label :create_stories, {} do
      = f.check_box :create_stories
      = I18n.t(:create_stories, scope: [:activerecord, :labels, :feature])
  .row
    .actions
      = f.submit 'Save'
      \|
      = link_to 'Delete', @feature, method: :delete, data: { confirm: "WARNING: Are you sure you want to delete this feature?" }
      \|
      = link_to 'Cancel', :back
