- session[:filter] ||= {}
- session[:filter][:sort] ||= {}
- sort = session[:filter][:sort][controller.controller_name] || []
- descending_field = "-#{field}"
- sorted_descending = sort.include?(descending_field)

.sortable
  = link_to url_for(controller: controller.controller_name, action: :index, sort: sorted_descending ? field : descending_field), remote: true do
    = name
    = content_tag('span', sorted_descending ? '▼' : '▲', class: '') if sorted_descending || sort.include?(field)
