- if (@tasks.peek rescue nil).blank?
  .eleven.columns.centered#Main
    %h3.subheader= t(:none_html, scope: [:controllers, :tasks])
- else
  .nine.columns.centered#Main
    - unless @iteration_mode
      .task_sort.twelve
        %table.twelve
          %thead
            %tr
              = render partial: 'shared/sortable', locals: {name: 'Title', field: 'title', classes: 'three'}
              = render partial: 'shared/sortable', locals: {name: 'Rank', field: 'rank', classes: 'three'}
              = render partial: 'shared/sortable', locals: {name: 'Points', field: 'point', classes: 'three'}
              = render partial: 'shared/sortable', locals: {name: 'Status', field: 'status', classes: 'three'}
    .twelve
      %ol.task_list#TaskList<
        - in_iteration = Constants::INTEGER_MIN
        - @tasks.each do |task, iteration = nil|
          - if iteration.present? && !iteration.is?(in_iteration)
            - in_iteration = iteration.number
            %li.iteration_marker{data: {iteration: iteration.number, collapsed: 0}}
              .row
                .three.columns= iteration.end_date.to_formatted_s(:medium)
                .two.offset-by-two.columns= "#{iteration.points} Points"
                .two.columns.iteration_toggle
                  .glyphicon.collapse_top
              
          - if task.present?
            = render partial: 'task', object: task, locals: {in_edit_mode: @in_edit_mode, iteration: iteration.present? ? iteration.number : nil}
    = render template: 'shared/bind_list'
