.box {
  @include box-sizing(border-box);
}

.small {
  font-size:$fontSizeSmall;
}

.glyphbutton {
  position:relative;
  input {
    cursor:pointer;
    background:transparent;
    border:none;
    padding:0;
    position:absolute;
    text-indent:-10000px;
    z-index:1;
    height:$glyphHeight;
    width:$glyphWidth;
    top:0;
    left:0;
  }
}

.glyphlink {
  color:inherit;
  display:inline-block;
  padding:0;
  *:hover & {
    color:inherit;
    text-decoration:none;
  }
  span {
    display:inline-block;
    padding-right:7px;
    position:relative;
    top:-1px;
  }
  .awesome {
    position:relative;
  }
}

.on-hover {
  visibility:hidden;
  li:hover &, tr:hover & {
    visibility:visible;
  }
}

.text-left {
  text-align:left;
}
.text-right {
  text-align:right;
}

.closer {
  color:$grayDark;
  display:inline-block;
  font-size:$fontSizeLarge;
  font-weight:$fontThick;
  line-height:$glyphHeight;
  text-align:center;
  width:$glyphWidth;
}

.command-block {
  .awesome {
    width:1em;
  }
  .glyphbutton {
  }
  .glyphlink {
    height:$glyphHeight;
    width:$glyphWidth;
    .awesome {
      width:1em;
    }
  }
  a, a:hover {
    color:$grayDark;
    text-decoration:none;
  }
}

*[data-filter] {
  display:none;
  &.visible {
    display:block;
  }
}

.filter-container {
  .row-fluid.section {
    border:none;
    margin-bottom:12px;
    &.hidden {
      display:none;
    }
  }
  form {
    border:1px solid #ccc;
    border-top:none;
    margin-bottom:0;
    padding:15px 8px 8px;
    .multi-select select {
      height:145px;
    }
    label {
      white-space:nowrap;
    }
  }
}

.iteration-marker {
  border-top:2px solid $grayDark;
  margin-bottom:5px;
  .iteration-toggle {
    cursor:pointer;
    font-weight:$fontThick;
    line-height:1.15em;
    .glyphicon {
      position:relative;
      top:4px;
      font-size:125%;
      font-weight:$fontThin;
    }
    .date {
      display:inline-block;
    }
    .badge {
      margin-top:4px;
      text-align:right;
      width:20px;
    }
  }
}

.points {
  cursor:pointer;
  display:inline-block;
  position:relative;
  .overlay {
    cursor:pointer;
    position:absolute;
    left:0;
    overflow:hidden;
    white-space:nowrap;
    z-index:auto;
    &.zero-points {
      width:0;
    }
    &.one-point {
      width:1*($pointsWidth + (2*$badgePadding) + 2px);
    }
    &.two-points {
      width:2*($pointsWidth + (2*$badgePadding) + 2px);
    }
    &.three-points {
      width:3*($pointsWidth + (2*$badgePadding) + 2px);
    }
    &.five-points {
      width:4*($pointsWidth + (2*$badgePadding) + 2px);
    }
    &.eight-points {
      width:5*($pointsWidth + (2*$badgePadding) + 2px);
    }
  }
  &.editable {
    cursor:pointer;
    span:hover {
      background-color:$blue;
    }
  }
  span {
    display:inline-block;
    font-size:$fontSizeMini;
    margin-right:2px;
    width:$pointsWidth;
  }
}

.overview {
  @extend .lead;
  margin-bottom:15px;
  position:relative;
  .command-block {
    display:inline-block;
    font-size:$baseFontSize;
    position:absolute;
    text-align:right;
    top:2px;
    right:8px;
    height:$glyphHeight;
    line-height:$glyphHeight;
    width:1 * ($glyphWidth + $glyphPadding);
    z-index:1;
  }
  #notice {
    color:$textColor;
    font-size:$fontSizeLarge*0.9;
  }
  p {
    margin-bottom:0;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
  }
}

.story {
  &.expanded {
    .projects {
      padding-top:10px;
      text-align:right;
      label {
        font-size:normal;
        font-weight:normal;
        margin-top:4px;
        input {
          margin-right:4px;
          position:relative;
          top:-3px;
        }
      }
    }
    form {
    margin-bottom:0;
    label {
      font-size:$fontSizeSmall;
      font-weight:$fontThick;
      margin-bottom:0;
    }
  }
}
  .label {
    font-size:$fontSizeMini;
    margin-right:2px;
    text-align:center;
    width:55px;
  }
}

li.task:hover:not([data-expanded='1']) {
  background-color:$colorHighlight;
}

.task {
  border-top:1px solid $grayLight;
  padding:4px 0;
  &[data-status='pending'] {
    cursor:move;
  }
  .command-block {
    display:inline-block;
    position:relative;
    top:1px;
    width:3 * ($glyphWidth + $glyphPadding);
    z-index:1;
  }
  .compact {
    .row-fluid {
      min-height:$baseLineHeight;
      & [class*="span"] {
        min-height:$baseLineHeight;
      }
    }
  }
  &.edit-mode {
    .status-bar, .completed, .in_progress, .pending {
      padding-right:8px;
    }
  }
  .expanded {
    .command-block {
      float:right;
      text-align:right;
    }
    .release-date {
    }
    form {
      margin-bottom:0;
      label {
        font-size:$fontSizeSmall;
        font-weight:$fontThick;
        margin-bottom:0;
      }
    }
  }
  .status-bar {
    padding-left:4px;
    padding-right:2px;
    border-right-width:8px;
    border-right-style:solid;
  }
  .completed {
    @extend .status-bar;
    border-right-color:$green;
  }
  .in_progress {
    @extend .status-bar;
    border-right-color:$blue;
  }
  .pending {
    @extend .status-bar;
    border-right-color:$red;
  }
  .project {
  }
  .description {
  }
  .release-date {
    display:inline-block;
    font-size:90%;
    position:relative;
    margin-right:5px;
  }
  .row-fluid.section {
    margin-bottom:8px;
  }
  .title {
    text-overflow:ellipsis;
    overflow:hidden;
    white-space:nowrap;
  }
}

.story {
  .command-block {
    display:inline-block;
    position:absolute;
    text-align:right;
    top:1px;
    right:4px;
    width:2 * ($glyphWidth + $glyphPadding);
    z-index:1;
  }
}

.table {
  td, th {
    position:relative;
  }
  th {
    color:$white;
    background-color:$grayLight;
    &.sortable {
      background-color:$blue;
    }
  }
  tr:hover:not([data-expanded='1']) {
    background-color:$colorHighlight;
  }
  .sortable {
    a, a:hover {
      color:$white;
      text-decoration:none;
    }
  }
}

.task-sort {
  .table {
    margin-bottom:0;
  }
}

// .disabled {
//   cursor:auto;
//   opacity:0.4;
// }

// .projects, .teams {
//   display:inline-block;
//   label {
//     display:inline-block;
//     line-height:$fontSizeSmall;
//   }
//   span, a {
//     display:inline-block;
//     font-size:$fontSizeSmall;
//     margin:2px 2px;
//     width:65px;
//   }
//   span.secondary, a.secondary {
//     color:#999;
//   }
//   .row {
//     line-height:$fontSizeSmall;
//     height:$fontSizeSmall;
//   }
// }
